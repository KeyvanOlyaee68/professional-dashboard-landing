import{a as l}from"./chunk-DDHFN6XV.js";import{E as a,_ as n,da as i,r as o,u as s}from"./chunk-INXQJWH5.js";var m=class r{constructor(e){this.http=e}apiUrl="http://localhost:8089";login(e){return this.http.post(`${this.apiUrl}/api/auth/login`,e,{withCredentials:!0})}createUser(e){debugger;return this.http.post(`${this.apiUrl}/api/auth/register`,e).pipe(s(t=>this.mapUserResponse(t)),a(this.handleError))}saveToken(e,t,g){debugger;localStorage.setItem("token",e),localStorage.setItem("Role",t),localStorage.setItem("CustomerName",g)}getToken(){return localStorage.getItem("token")}getUserRole(){return localStorage.getItem("Role")}getCustomerName(){return localStorage.getItem("CustomerName")}isAccountant(){return this.getUserRole()==="accountant"}isAdmin(){return this.getUserRole()==="Admin"}logout(){localStorage.removeItem("token"),localStorage.removeItem("Role"),localStorage.removeItem("CustomerName")}isLoggedIn(){return!!this.getToken()}mapUserResponse(e){return{id:e.id,userName:e.userName,roleId:e.roleId,role:e.role}}handleError(e){return console.error("An error occurred:",e),o(()=>new Error(e.message||"\u062E\u0637\u0627\u06CC \u0633\u0631\u0648\u0631 \u0631\u062E \u062F\u0627\u062F\u0647 \u0627\u0633\u062A"))}static \u0275fac=function(t){return new(t||r)(i(l))};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{m as a};
